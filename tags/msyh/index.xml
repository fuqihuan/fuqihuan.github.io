<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Msyh on inorz.net</title>
    <link>http://inorz.net/tags/msyh/index.xml</link>
    <description>Recent content in Msyh on inorz.net</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <atom:link href="http://inorz.net/tags/msyh/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>zimbra添加微软雅黑字体</title>
      <link>http://inorz.net/2016/04/11/zimbra%E6%B7%BB%E5%8A%A0%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91%E5%AD%97%E4%BD%93/</link>
      <pubDate>Mon, 11 Apr 2016 23:20:48 +0000</pubDate>
      
      <guid>http://inorz.net/2016/04/11/zimbra%E6%B7%BB%E5%8A%A0%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91%E5%AD%97%E4%BD%93/</guid>
      <description>&lt;p&gt;很多同鞋都习惯了在zimbra上面使用雅黑字体来写邮件
最近把zimbra从8.0.5升级到了8.6.0后，没留意又覆盖回去了。
在这里做个记录&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h2 id=&#34;配置原理&#34;&gt;配置原理&lt;/h2&gt;

&lt;p&gt;ZWC控制资源文件（properties文件）来实现国际化下的字体列表。在JAVA架构的系统下，通过资源文件来实现国际化是常用的技术，ZWC也不例外。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;经过搜索，ZWC中控制国际化下的字体列表的资源文件是:
&lt;code&gt;zimbrahome/jetty/webapps/zimbra/WEB-INF/classes/messages/AjxMsg.properties&lt;/code&gt;
按照Java的规则，中文简体对应的资源文件应该是:
&lt;code&gt;zimbrahome/jetty/webapps/zimbra/WEB-INF/classes/messages/AjxMsg_zh_CN.properties&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;配置文件的写法大概是：

&lt;ul&gt;
&lt;li&gt;可以向列表中加入任意多的字体数量。&lt;/li&gt;
&lt;li&gt;要添加一个新的字体，首先要添加一个键名类似fontFamilyBase{number}.display的条目和一个键名类似fontFamilyBase{number}.css的条目，分别表示字体显示名称和内部名称。&lt;/li&gt;
&lt;li&gt;对于国际化环境而言，则应使用键名分别为fontFamilyIntl{number}.display和fontFamilyIntl{number}.css的条目。&lt;/li&gt;
&lt;li&gt;这里的{number}是一个阿拉伯数字，从1开始，新建时应比当前最大的数字大1。要结束这些列表，将最后一个条目的值设为“###”。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;配置过程&#34;&gt;配置过程&lt;/h2&gt;

&lt;p&gt;上面说了一通，其实修改方法比较简单，就修改两个地方即可：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;修改配置文件&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cp zimbrahome/jetty/webapps/zimbra/WEB-INF/classes/messages/AjxMsg_zh_CN.properties /data/backup/
vim zimbrahome/jetty/webapps/zimbra/WEB-INF/classes/messages/AjxMsg_zh_CN.properties
# 找到fontFamilyIntl列表中第一个值为“###”的条目。根据不同的软件版本，那个{number}可能不同，在7.0上是4（即前面有3个字体）。
# 修改fontFamilyIntl4值。可按情况修改
# 微软雅黑转换为Unicode后是 \u5fae\u8f6f\u96c5\u9ed1
fontFamilyIntl4.display = \u5fae\u8f6f\u96c5\u9ed1
fontFamilyIntl4.css = \u5fae\u8f6f\u96c5\u9ed1, msyh
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;保存文件后重启Zimbra服务。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;zmcontrol restart
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;注意事项&#34;&gt;注意事项&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;上面修改后的字体，需要客户端本地有对应的字体才能够正常使用。&lt;/li&gt;
&lt;li&gt;windows平台: win7之后基本都自带微软雅黑了，应该不成问题。&lt;/li&gt;
&lt;li&gt;MAC平台: mac用户的话就需要自己安装微软雅黑了。不过相信一般mac用户都用自带的邮件app的多些。也不是问题。&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
  </channel>
</rss>